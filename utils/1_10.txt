С ЗУП 3.1 и 1С Fresh: ВПФ

Настройки
Установить и обновить ВПФ в 1С ЗУП 3.1
Типовые конфигурации для установки ВПФ
•	Зарплата и управление персоналом/Зарплата и управление персоналом КОРП/Зарплата и кадры Государственного учреждения 3.1
•	Зарплата и управление персоналом/Зарплата и управление персоналом КОРП 2.5
•	Платформа 8.3 или последняя 8.2
Процесс установки и обновления
  Предварительное условие: 
•	У Вас есть права Администратора в 1С
1.	Скачайте на компьютер последнюю версию внешнюю печатную форму ссылке по ссылке и запустите 1С ЗУП 
2.	В 1С нажмите «Администрирование» > «Печатные формы, отчеты и обработки» (если в панели «Администрирование» такого пункта нет, значит у пользователя нет прав Администратора 1С) 
3.	Нажмите «Дополнительные отчеты и обработки» 
4.	Установите или обновите ВПФ:
o	В случае, если Вы первый раз устанавливаете ВПФ, нажмите «Добавить из файла» 
o	В случае, если старая версия ВПФ уже была установлена ранее, нажмите на строчку с названием обработки > «Обновить из файла» 
5.	В окне предупреждения нажмите «Продолжить» и выберите ранее скаченный файл внешней печатной формы 
6.	Нажмите «Записать и закрыть» 


Подключить ВПФ в 1С Fresh
________________________________________
1.	Скачайте последнюю версию обработки по ссылке
2.	Передайте скачанный файл и ссылку на данную инструкцию в обслуживающую организацию 
3.	Далее все шаги данной инструкции выполняет сотрудник обслуживающей организации
________________________________________
Передать файл на адаптацию
Для передачи файла на адаптацию 
1.	Перейдите в раздел Адаптация 
2.	Перейдите на вкладку Дополнительные отчеты и обработки, нажмите на кнопку Добавить и выберите загруженный файл внешней печатной формы 
3.	После того, как адаптация будет завершена, появится зеленая галочка. Откройте обработку двойным кликом. 
________________________________________
Передать файл ВПФ на аудит
В открывшемся окне можно передать файл внешней печатной формы на аудит, для этого:
1.	Нажмите на кнопку Создать 
2.	В открывшемся окне выберите Из файла на диске и укажите файл в соответствующей строке, для этого нажмите на кнопку ⋯ 
3.	Выберите файл с диска или перетащите его в открывшееся окно 
4.	Нажмите ОК 
5.	Убедитесь, что файл был загружен и нажмите на кнопку Продолжить 
6.	Укажите режим совместимости и нажмите на кнопку Продолжить  
7.	Закройте форму мастера и дождитесь прохождения аудита 
•	Когда процесс аудита будет завершен, статус обработки сменится с “Ожидает аудита” на “Опубликовано” 
Теперь обработку можно использовать для интеграции с HRlink.



Сформировать и скопировать API-токен в 1С
________________________________________
 
  	 
Роли, которые могут копировать токен
Администратор, Кадровик
Описание
API-токен используется для настройки передачи данных между порталом HRlink и 1С
Процесс копирвания токена на портале HRlink
•	Нажмите на иконку с инициалами в верхнем правом углу и выберите в выпадающем меню Получить API-токен 
•	В появившемся диалоговом окне нажмите Скопировать 
________________________________________
Процесс заполнения токена в ВПФ 1С
•	Откройте ВПФ: Печать→<HRl-ink> Обмен данными с порталом→Авторизация и настройки 
•	В пустое окно введите адрес портала 
•	Кликните на кнопку Токен заполнен, в открывшееся окно вставьте скопированный токен и нажмите ОК 
Результат успешного заполнения токена
Если все прошло успешно, то появится всплывающее уведомление 
Дальнейшие действия
Токен будет действовать один год с момента получения. Для повторного получения токена повторите все вышеописанные действия.


Передать настройки другим пользователям
________________________________________
Роли, которым доступно действие
Администратор, Кадровик только в том случае, если есть права Администратора 1С
Описание
Настройки ВПФ разделены на Общие и Персональные.
К Персональным настройкам относится ввод данных для авторизации пользователя: Адрес портала и API-токен.
К Общим настройкам относятся:
•	Сопоставление типов документов по умолчанию
•	Тип документа, по которому не настроено сопоставление по умолчанию
•	Порядок подписания 
•	Руководитель по умолчанию
•	Параметры выгрузки сотрудников
Пользователю с правом АдминистрированиеДанных доступна кнопка переноса Общих настроек выбранным пользователям.
Процесс передачи Общих настроек другим пользователям
Для передачи общий настроек другим пользователям: 
•	В окне ВПФ, в разделе «Авторизация и настройки» кликните на иконку с настройками, выберите Общие пользовательские параметры > Установить параметры пользователям и выберите нужных пользователей из списка 


Настроить соответствие документов
Описание
Чтобы документы из 1С выгружались на портал с корректным типом документа, необходимо выполнить настройку соответствия в форме обмена данными с порталом.
Процесс автоматической настройки соответствия
Вы можете применить настройки сопоставления по умолчанию и использовать базовый набор соответствий.
Последовательность шагов
Для этого в форме обмена данными:
•	Перейдите в раздел Параметры выгрузки документов > Соответствия типов документов. В открывшемся списке соответствий вызовите меню, кликнув в любом поле правой кнопкой мыши и выберите Заполнить значениями по умолчанию
 
Результат успешной автоматической настройки
Если все документы в верхней части формы (дереве документов) сопоставились корректно, дополнительных настроек не требуется.
Процесс ручной настройки соответствия для документов, прикрепленных к кадровому мероприятию
Если по какому-то документу 1С не проставился тип документа портала или проставился некорректно, то необходимо настроить соответствие вручную. 
Последовательность шагов
•	В списке соответствий вызовите меню, кликнув в любом поле правой кнопкой мыши, нажмите Добавить 
•	В первом поле выберите нужный тип документа на портале 
•	В колонке «Место крепления файла в 1С» выберите название кадрового мероприятия, из которого был сформирован документ - его можно увидеть в верхней части формы обмена данными, в дереве документов. 
•	В колонке «Маска имени файла» пропишите часть названия сформированного файла документа (ключевое слово имени файла или точное его название). Например, только Приказ о предоставлении отпуска по уходу за ребенком содержит словосочетание «за ребенком», его и следует вписать в Маску имени файла. Нажмите Да и примените изменение сопоставления к дереву документов  
Результат успешной настройки соответствия
•	В дереве документов вы увидите, что сопоставление настроено 
Теперь документ будет выгружен на портал с корректным типом документа 
Процесс ручной настройки соответствия для документов, прикреплённых к сотруднику
Последовательность шагов
Если документ передается из карточки сотрудника, то в колонке «Место крепления файла в 1С» нужно выбрать «Сотрудники»
•	В колонке «Маска имени файла» пропишите часть названия сформированного файла документа (ключевое слово имени файла или точное его название). Например, только Приказ о предоставлении отпуска по уходу за ребенком содержит словосочетание «за ребенком», его и следует вписать в Маску имени файла. Нажмите Да и примените изменение сопоставления к дереву документов  
•	При передаче документа из карточки сотрудника, номер и дата документа будет подтягиваться из названия файла (формат номера через #/№, без пробела, формат даты - 00.00.0000 или 00.00.00) 
•	Нажмите Enter и примените изменение сопоставления к дереву документов 
Результат успешной настройки соответствия
В дереве документов вы увидите, что сопоставление настроено 
Теперь документ будет выгружен на портал с корректным типом документа 
________________________________________
Процесс настройки параметров подписания документов
В колонке «Приоритет подписания» можно настроить порядок подписания индивидуально для каждого типа документа. 


Выгрузить лог ошибки
________________________________________
Описание
В случае возникновения ошибки, при передаче данных из 1С на портал HRlink, следует выгрузить лог этой ошибки на направить специалистам HRlink на help@hr-link.ru для изучения и устранения ошибки. 
Процесс выгрузки лога
1.	В окне Обмена данными с HRlink повторите действие, которое вызвало ошибку и при появлении ошибки откройте вкладку «Авторизация и настройки» 
2.	Нажмите нажмите на значок «Настройки» 
3.	Выберите «Выгрузить лог»  
4.	Сохраните лог на компьютер (4) и отправьте его специалистам HRlink на help@hr-link.ru  


Выбрать источник выгрузки структуры отделов в 1С ЗУП КОРП
________________________________________
________________________________________
Кадровик может выбрать, из какого справочника 1С будет выгружаться структура отделов в HRlink: «Подразделения» или «Структура предприятия». Это настройка позволяет учитывать, где хранятся актуальные данные у Вашей компании.
  Для выбора доступны два варианта: 
•	Подразделения — данные загружаются из справочника «Подразделения» (значение по умолчанию)
•	Структура предприятия
o	В HRlink передаются только подразделения. Организации в HRlink не передаются
o	Сохраняется иерархия — структура родительских и дочерних отделов, переданных в HRlink, повторяет структуру в 1С
________________________________________
Процесс выбора источника выгрузки структуры отделов в HRlink
В ВПФ:
1.	Перейдите в раздел: Авторизация и настройки > Настройки  
2.	В разделе «Подразделения» найдите настройку «Источник выгрузки структуры отделов» и выберите из выпадающего списка одно из следующих значений: 
o	Подразделения — данные выгружаются из справочника «Подразделения»
o	Структура предприятия — данные выгружаются из справочника «Структура предприятия» 
3.	Нажмите Сохранить настройки  
Результат изменения настройки
После сохранения настройка начнёт применяться автоматически при:
•	Передаче сотрудников в HRlink
•	Передаче данных о руководителе отдела
•	Выполнении пакетной выгрузки


Отключить ведение протокола работы
________________________________________
В 1C ЗУП КОРП в ВПФ можно отключить ведение протокола работы. Это полезно для случаев, когда объем данных большой, и их постоянное протоколирование влияет на скорость работы. Отключение протокола позволяет ускорить выполнение задач, сохраняя корректную передачу данных на портал.
  Когда использовать:
•	Если у Вас большой объем данных, и Вы замечаете замедление работы системы
•	Если необходимость в сохранении логов отсутствует
________________________________________
Процесс настройки протокола работы
  Напоминаем, что протокол работы можно выгрузить и  отправить в Службу заботы о клиентах,  если Вам не удалось самостоятельно разобраться с ошибкой. Если Вы отключили ведение протокола, включите его, повторите действия, которые привели к ошибке, и снова выгрузите протокол. В этой статье мы описали самые распространённые ошибки и способы их самостоятельного исправления. 
В ВПФ:
•	Перейдите в Авторизация и настройки > Настройки  
•	В разделе Системные настройки найдите параметр «Вести протокол работы» и выберите из выпадающего списка одно из следующих значений:
o	Нет. Протокол работы не будет сохраняться
o	Ошибки. В протоколе будут сохранятся только ошибки, если они возникали в процессе работы
o	Ошибки + Запросы. В протоколе будут сохраняться ошибки и запросы, которые привели к ошибкам
o	Полный (установлено по умолчанию). В протоколе будут сохранятся все действия в системе 
•	Нажмите Сохранить настройки, чтобы изменения вступили в силу 


Кастомизация
Кастомные печатные формы
________________________________________
Внешняя печатная форма HR-Link позволяет пакетно формировать и подготавливать для отправки на портал табличные и офисные документы, реализованные в виде команд печати для объектов типовой конфигурации, а также добавленных своих объектов, но поддерживающих механизм БСП, обеспечивающий хранение двоичных данных в соответствующих справочниках. 
Пример: документ ПриемНаРаботу и справочник ПриемНаРаботуПрисоединенныеФайлы.
Добавленные разработчиками внешние печатные формы должны быть реализованы по методологии БСП: при вызове команды добавленной внешней печатной формы она должна соответствовать следующим условиям:
•	команда печатной формы должна для своего исполнения использовать алгоритм вызова команды ВызовСерверногоМетода (ДополнительныеОтчетыИОбработкиКлиентСервер.ТипКомандыВызовСерверногоМетода());
•	в экспортной процедуре Печать() модуля объекта внешней печатной формы должно выполняться заполнение требуемого макета и его помещение в колонку ТабличныйДокумент таблицы КоллекцияПечатныхФорм, передаваемой в данную процедуру. Данная таблица может быть сформирована функцией общего модуля типовой конфигурации УправлениеПечатью.ПодготовитьКоллекциюПечатныхФорм();
•	если внешняя печатная форма заполняет офисный документ (например, WORD), то результат заполнения (двоичные данные офисного документа) помещаются в колонку ОфисныеДокументы вышеуказанной таблицы в виде Соответствия, ключом которого будет адрес временного хранилища, а значением – имя файла. 
Подробно данный алгоритм описан в методических рекомендациях фирмы 1C на портале ИТС.
При вызове команды <HR-Link> Сформировать пакет документов и отправить на портал внешней печатной формы HR-Link проверяется наличие значения в колонке ОфисныеДокументы. 
Если значение заполнено - в качестве двоичных данных, присоединяемых к исходному объекту, используются они. Если нет - проверяется наличие значения в колонке ТабличныйДокумент, сохранение этого значения в виде PDF-файла. Сформированные таким образом двоичные данные результата работы команды печати присоединяются к исходному объекту и предлагаются для отправки на портал HR-Link.
Внешние печатные формы, выполняемые на клиенте (например, использующие алгоритм открытия приложения Word на клиенте и заменяющие заданные в шаблоне документа параметры на значения, полученные из базы 1С) для возможности их взаимодействия с механизмом пакетной печати следует доработать по описаниюв этой статье.


Передать теги сотрудников из 1С в HRlink
________________________________________
Передача тегов сотрудника из 1С в HRlink
Описание
Тег помогает классифицировать сотрудника по любым дополнительным характеристикам или атрибутам. 
Например, местоположению, рабочему статусу, проекту или команде, роли в проекте, языковым навыкам и т.д. 
Особенности
 Переданные из 1С теги в HRlink можно использовать: 
•	В качестве фильтров и находить по ним документы сотрудников с указанными атрибутами в реестре документов HRlink
•	В качестве фильтра в скачаном xml-реестре сотрудников
•	В качестве поля заявления после добавления специального ключа подстановки из системных полей в шаблон печатной формы заявления 
________________________________________
Процесс передачи тегов из 1С
Предварительные условия
 Перед передачей тегов в HRlink убедитесь в том, что у Вас: 
•	В 1С, в карточке сотрудников, есть поле с тегом 
•	Настроен модуль кастомизации по инструкции 
•	Модуль кастомизации добавлен в 1С и подключен по инструкции 
Последовательность шагов
•	Перейдите в Кадры > Сотрудники. Выделите сотрудников, которых необходимо передать, нажмите на Печать > Обмен данными с порталом   
•	В открывшемся окне раскройте раздел Авторизация и настройка > Настройки 
•	В строке «Использовать теги при выгрузке сотрудников» установите Да двойным кликом 
•	Выберите при помощи галочек сотрудников для передачи на портал и нажмите на кнопку Отправить сотрудников 
Подробнее о передаче сотрудников в инструкции
Результат успешной передачи тегов 
Сотрудники будут переданы на портал со всеми атрибутами, включая теги.
Для проверки передачи тегов: 
•	Раскройте окно с фильтрами в реестре документов 
•	Если все предыдущие шаги были выполнены успешно, то  этого в выпадающем списке фильтра «Теги сотрудника» должны отобразиться все теги, которые есть в 1С  
________________________________________
Дальнейшие шаги
Если теги необходимо добавить в шаблон заявления, то выполните это по инструкции. Скопируйте ключ подстановки системного поля «Теги сотрудников» в шаблон печатной формы заявления.


Подключить модуль кастомизации
________________________________________
Модуль кастомизации
Описание
Модуль кастомизации — это компонент Модуля интеграции, который позволяет адаптировать настройку передачи информации из 1С в HRlink под специфические задачи, которые требуются в Вашей организации. Например, можно добавить передачу тегов сотрудника из 1С в HRlink.
Процесс настройки модуля кастомизации
Последовательность шагов через Службу заботы о клиентах
•	Сформулируйте задачу, которая должна выполняться через модуль кастомизации. Например, передача существующего в 1С в карточке сотрудника поля на портал в качестве тега как дополнительный маркер (обозначение) сотрудника. Приложите скриншот из 1С 
•	Когда модуль кастомизации будет готов, специалист Службы заботы о клиентах направит Вам в ответном письме готовый файл. Передайте этот файл администратору 1С для последующей установки модуля
Последовательность шагов специалиста 1С
В этой обработке могут быть описаны свои обработчики ряда событий, происходящих в основной Внешней печатной форме HRlink. На данный момент в модуле кастомизации доступны следующие события:
•	//Список событий заполнения дерева документов
•	//ДеревоДокументов_ПередЗаполнениемДереваДокументов
•	//ДеревоДокументов_ПослеЗаполненияСтрокиВладельца
•	//ДеревоДокументов_ПослеЗаполненияСтрокиФайла
•	//ДеревоДокументов_ПослеЗаполненияДереваДокументов
То есть в событии "ДеревоДокументов_ПослеЗаполненияСтрокиФайла" можно перезаполнить строку файла документа своими значениями.
Для настройки модуля кастомизации:
•	В режиме «Конфигуратор» откройте файл модуля интеграции и найдите в макетах «Модуль кастомизации» 
•	Внесите необходимые изменения и добавьте модуль кастомизации в 1С 
________________________________________
Процесс установки модуля кастомизации администатором 1С
Последовательность шагов
Для добавления модуля кастомизации:
•	Перейдите в Администрирование > Печатные формы, отчёты и обработки 
•	Перейдите в Дополнительные отчёты и обработки 
•	Нажмите на кнопку Добавить из файла и выберите файл, который Вы сохранили на своём компьютере 
•	Нажмите на кнопку Записать и закрыть 
________________________________________
Процесс добавления модуля кастомизации в ВПФ HRlink кадровиком
Последовательность шагов
Для подключения модуля кастомизации:
•	Откройте окно обмена данными с порталом из раздела «Сотрудники» или любого кадрового мероприятия. Для этого выберите Печать > Обмен данными с порталом 
•	В открывшемся окне раскройте раздел Авторизация и настройка > Настройки 
•	Перейдите в Системные настройки и в поле «Дополнительная внешняя обработка от HRlink» выберите загруженный модуль кастомизации 


Работа с кастомными печатными формами
________________________________________
Для механизма пакетной печати внешней печатной формы реализован функционал работы с кастомными печатными формами с вариантом вызова ОткрытиеФормы.
По наблюдениям, такой вариант запуска используется для выбора пользователем перед формированием документа каких-либо дополнительных параметров, а также в случае формирования офисного документа, используя механизм replace, замещающего параметры в шаблоне на значения, полученные из базы 1с.
Основная идея: выбранные клиентские печатные формы вызываются из формы пакетной печати HR-Link последовательно, ожидая закрытия предыдущей открытой клиентской формы. Также клиентской форме в параметрах открытия передается стандартный параметр ОбъектыНазначения(Массив, содержащий элементы, для которых выполняется формирование документов). После завершения формирования документа следует сформировать определенную структуру данных и передать ее в качестве параметра закрытия формы методу ЭтаФорма.Закрыть(). Таким образом эти данные будут возвращена обработчику формы-владельца (ОписаниеОповещенияОЗакрытии).
Возвращаемые данные представляют собой Массив, элементами которого являются Структуры с набором из трех перечисленных полей:
СсылкаНаОбъект – ссылка на объект базы 1с, Справочник или Документ, к которому будет присоединен сформированный кастомной печатной формой документ;
ИмяФайла – имя файла, которое будет использовано для присоединения к объекту;
АдресВХ / ДвоичныеДанные / ПутьКФайлу – можно использовать любой из этих ключей:
АдресВХ – адрес временного хранилища, содержащего двоичные данные сформированного файла. Следует иметь в виду, что если адрес временного хранилища связан с уникальным идентификатором формы обработки, то он будет очищен при закрытии этой формы.
ДвоичныеДанные – двоичные данные сформированного файла
ПутьКФайлу – полный путь к сформированному файлу на клиенте
Все перечисленные значения в том или ином виде присутствуют в кастомной печатной форме в процессе ее выполнения на разных этапах формирования документа, поэтому собрать из них такой набор данных не должно составить особых сложностей.
Далее пакетная печать печатной формы HR-Link обработает полученные данные, отработает ранее реализованный механизм формирования печатных форм с вариантом исполнения ВызовСерверногоМетода, если они были выбраны пользователем, и присоединит все полученные данные к соответствующим объектам.
Для лучшего понимания предлагаемого решения реализован тестовый пример внешней печатной формы с обоими вариантами команд печати (ВызовСерверногоМетода, ОткрытиеФормы), реализующий формирование word-документа на сервере без установленного там Microsoft Word, а при вызове его клиентской командой открытия формы – собирающий описанный ранее набор возвращаемых данных в клиентской форме методом формы Закрыть().
Пример функционала ВПФ можно скачать здесь


Разделить групповой документ «Премия» по сотрудникам
________________________________________
Внешняя печатная форма HR-Link позволяет пакетно формировать и подготавливать для отправки на портал групповые документы, в которых содержится информация о нескольких сотрудниках сразу. 
В случае, если такой документ (рассмотрим Приказ на премию) необходимо направить каждому сотруднику в отдельности и персонально (чтобы была видна только его Премия), необходимо реализовать кастомную печатную форму, которая позволит на основании Документа Премия сформировать файлы печатных форм для каждого сотрудника из Документа. 
 
Автоматическое разделение группового документа «Премия» по сотрудникам
Для формирования персонального документа необходимо: 
•	Использовать версию ВПФ 1.50 и выше 
•	Скачать файл  ВПФ_Премия поштучно
•	Добавить скачанные файлы ВПФ в 1С: Администрирование > Печатные формы, отчеты и обработки > Дополнительные отчеты и обработки > Добавить из файла > последовательно добавить скачанные файлы > Записать и закрыть.
•	Скачать файл расширения Сотрудник для присоединения
•	Добавить файл с расширением в 1С: Администрирование > Печатные формы, отчеты и обработки > Расширения > Добавить из файла
________________________________________
Механизм разделения печатных форм других массовых документов
В процедуру общего модуля БСП УправлениеПечатью.ПечатьПоВнешнемуИсточнику, обеспечивающему формирование кастомных печатных форм, передается стандартный параметр ПараметрыВывода.
В случае вызова этой процедуры из механизма пакетной печати внешней печатной формы HR-Link в этом параметре передается несколько дополнительных ключей:
 
•	HRLink_СтандартнаяОбработкаПрисоединенияФайлов, значение по умолчанию Истина. В этом случае пакетная печать HR-Link извлечет сформированные печатные формы документов из таблицы КоллекцияПечатныхФорм и присоединит их к исходному объекту (существующий сейчас алгоритм). Изменение значения этого параметра на Ложь в алгоритме кастомной печатной формы позволяет отменить выполнение алгоритма присоединения в рамках пакетной печати HR-Link, например, в случае, если разработчик кастомной печатной формы уже выполнил это присоединение самостоятельно в своем решении.
•	
HRLink_МассивПрисоединенныхФайлов - в паре с предыдущим параметром, позволяет передать в значении массив ссылок на сформированные и присоединенные файлы.
Иначе говоря, если в алгоритме кастомной клиентской печатной формы определить алгоритм формирования и присоединения сформированных печатных форм документов к требуемому объекту, следует передать список присоединенных файлов в параметре HRLink_МассивПрисоединенныхФайлов и установить значение HRLink_СтандартнаяОбработкаПрисоединенияФайлов = Ложь.


Передать сотрудников в HRlink
________________________________________
________________________________________
Передача сотрудника в HRlink из 1С ЗУП корп
Особенности
 Если у сотрудника иностранный паспорт, то перед выгрузкой такого сотрудника выполните следующие действия по инструкции
 Отправка SMS кодов для УНЭП происходит только на мобильный телефон или электронную почту, поэтому при передаче сотрудника, у которого в карточке указан городской номер телефона, появится ошибка. Чтобы ошибка не возникала, стоит отметить галочкой только Мобильный телефон
Процесс передачи сотрудников на портал
Предварительные условия
 Перед первой передачей сотрудников из 1С в HRlink необходимо выполнить первичную настройку ВПФ:
•	Сформировать на портале API-токен и заполнить его в настройках ВПФ, как описано в инструкции
Срок действия API-токена – 1 год. Токен можно получить повторно по истечению этого срока или в любой момент, если токен потеряется. 
Особенности выгрузки обновлённых данных сотрудников на портал после их изменения в 1С
 При выгрузке обновлённых данных в HRlink из SAP, Босс-Кадровик или через Внешнюю печатную форму из 1С:
•	Можно изменить любые персональные данные, включая ФИО и данные о документах сотрудника в учётной системе и сделать повторную выгрузку в HRlink
•	Нельзя полностью удалить из HRlink подтвержденный канал уведомления: Email или Номер телефона. Если требуется выполнить это действие, то обратитесь в Службу заботы о клиентах help@hr-link.ru
________________________________________
 Если Вы поменяли сотруднику канал уведомления в 1С (Email или Номер телефона), то после повторной передачи такого сотрудника на портал:
•	В карточке сотрудника HRlink останется ранее подтвержденный канал уведомления и появится новый неподтвержденный канал
•	Сотруднику необходимо будет снова принять приглашение, ввести 4 последние цифры номера паспорта и таким образом подтвердить новый канал
•	После подтверждения старый канал удалится и вместо него появится новый подтвержденный канал уведомлений
________________________________________
 Если внести изменения в ФИО, произойдет автоматический перевыпуск УНЭП. Такому сотруднику необходимо будет повторно подписать заявку в УЦ
Последовательность шагов
Для передачи данных о сотрудниках в 1С:
•	Зайдите в: Кадры > Сотрудники и выберите сотрудника или сотрудников, которых необходимо выгрузить в HRlink 
•	Нажмите: Печать > HR_Link обмен данными с порталом > Сведения о сотрудниках > Параметры выгрузки сотрудников 
•	В разделе «Параметры выгрузки сотрудников» выберите, какую информацию необходимо передать на портал:
o	Поставьте галочки напротив тех контактных данных, которые будут переданы в HRlink
o	Выберите Отправить приглашение сотрудникам, если сотрудники еще не приглашены на портал и назначьте канал для отправки приглашения: SMS или Email 
o	Выберите Разрешенные методы подписания. Если в разрешенных методах подписания был выбран УНЭП, то назначьте Код подписания УНЭП направлять на: SMS или Email 
•	Настройте передачу остатка дней отпуска, если это необходимо: Авторизация и настройки > Настройки > Отображать остаток дней отпуска > Да. В HRlink передается общее количество дней отпуска, накопленное в 1С за все время работы сотрудника в организации 
Остаток дней отпуска:
•	Обновляется при повторной передаче данных сотрудника из 1С.
•	Не обновляется в HRlink после оформления сотрудником заявления на отпуск.
Например, если сотрудник подал заявление на отпуск, где длительность отпуска 7 из 12 доступных дней, а затем сразу решил подать еще одно заявление на отпуск, то при повторной подаче заявления сотрудник снова увидит 12 доступных дней отпуска.
Результат успешной выгрузки
Если все прудыдущие шаги были выполнены верно, то: 
•	На портал будут выгружены: все персональные данные; контактные данные, которые вы отметили в параметрах; остаток дней отпуска, если это было указано в настройках.
•	Сотруднику придет, если это было указано в параметрах выгрузки: приглашение на портал и затем ссылка на выпуск УНЭП после того, как сотрудник примет приглашение.  
 
Если вы назначили разные каналы для отправки кода подписания УНЭП и для отправки приглашения, то:
•	На выбранный канал отправки приглашения сотрудник получит ссылку-приглашение, а затем будет получать уведомления от HRlink о новом документе
•	На выбранный канал получения Кода УНЭП сотрудник будет получать одноразовые четырехзначные коды для подписания документа в HRlink
Возможные ошибки и решения
Если при передаче сотрудников возникла ошибка, то выгрузите лог ошибки из 1С и отправьте в Службу заботы о клиентах на help@hr-link.ru.


Передать сотрудника с иностранным паспортом
________________________________________
Если у сотрудника иностранный паспорт, чтобы его карточка корректно выгрузилась на портал, необходимо проставить Код Альфа в 1С. 
Чтобы это сделать:
1.	Перейдите в карточку сотрудника в 1С и нажмите на иконку  в поле «Гражданство» (1) 
2.	В открывшимся окне нажмите «Еще» (2) и затем «Показать в списке» (3) 
 
3.	В открывшимся списке необходимо нажать на кнопку «Добавить из классификатора» (1), затем на кнопку Выбрать и указать нужное гражданство 
 
4.	После проделанных действий необходимо нажать на кнопку Записать и закрыть и повторно выгрузить сотрудника на портал по инструкции 
 

Передать пакет документов в HRlink
Пакетная передача документов из 1С в HRlink
Описание
Позволяет осуществить массовую передачу документов в HRlink из выбранного кадрового мероприятия или из всех кадровых документов 1C. 
Процесс пакетной передачи документов
Особенности
 Если вы ранее уже формировали выбранные документы, то они будут сформированы и прикреплены повторно к выбранному кадровому мероприятию
 Если сотрудник подписывает документ при помощи ПЭП Госуслуги, то по требованию портала Работа в России документ сначала должен подписать представитель юрлица с помощью УКЭП
Формирование документов в 1С
Выберите в 1С документы для отправки на портал. 
•	Перейдите в Кадры > Все кадровые документы 
•	Отметьте необходимые для выгрузки документы и нажмите Печать > <HR-Link>: сформировать пакет документов и отправить на портал 
•	Выберите печатные формы, отметив галочками нужные документы в появившемся окне > Сформировать документы 
•	В правом верхнем углу открывшегося окна можно выбрать следующие способы отправки документа:
Отправить черновик	Документ будет передан со статусом Черновик. Для дальнейшей отправки документа на подпись перейдите в HRlink
Отправить на подпись	Документ будет передан в HRlink со статусом В работе. После передачи документа в HRlink Документ сразу уйдет на подписание следующему участнику маршрута
Отправить с подписью	Документ будет передан в HRlink со статусом Подписан работодателем и сразу после выгрузки уйдет на подписание следующему участнику маршрута. Для отправки документа с подписью у вас должен быть подтвержденный УКЭП. В появившемся окне необходимо выбрать Сертификат, ввести пароль и нажать кнопку Продолжить
•	 
Настройка параметров выгрузки документов
•	Перейдите на вкладку Параметры выгрузки документов и поставьте галочку напротив пункта Выгружать номера документов с префиксом, если это необходимо.
•	Назначьте маршрут подписания документов. Маршрут может быть: 
Свой для каждого типа документа	Параметры выгрузки документов > Соответствия типов документов > назначьте Маршрут подписания для тех типов документов, которым не подходит приоритет подписания (по умолчанию)
По умолчанию	Тогда маршрут будет использоваться для всех типов документов, которым не назначен свой Маршрут подписания
Общим для всех документов	при наличии зеленой галочки напротив Приоритет подписания (по умолчанию), даже если назначен свой маршрут подписания
•	Назначьте руководителя. Руководитель заполняется автоматически по следующим правилам:  
Из документа	Если реквизит Руководитель заполнен в документе
По умолчанию для одного документа	Подставляется во все документы, в которых реквизит Руководитель не заполнен
По умолчанию для всех документов	При наличии зеленой галочки напротив пункта «Руководитель (по умолчанию)», даже если реквизит Руководитель заполнен в документе
 
•	Настройте соответствия типов документов по инструкции
•	Настройте параметры выгрузки сотрудников по инструкции. Параметры выгрузки сотрудников настраиваются только в том случае, если сотрудник еще не был приглашен на портал. Таким образом, вместе с выгруженными документами в HRlink будут переданы новые сотрудники, которые смогут принять приглашение, выпустить УНЭП и приступить к подписанию Документов. 
Возможные ошибки и решения
Если при передаче данных возникла ошибка, необходимо сразу же после ее возникновения выгрузить лог и направить его в Службу заботы о клиентах на help@hr-link.ru.


Присоединить документ к сотруднику
________________________________________
Описание
Передавать документы из 1С на портал можно, предварительно присоединив их к карточке сотрудника.
Эта функция может понадобиться, если вы формируете документ в 1С из карточки сотрудника или вам просто нужно передать любой другой документ, созданный на компьютере
Процесс присоединения документов к карточке сотрудника
1. Сформируйте документ в 1С или на компьютере и сохраните его в нужной папке или на рабочем столе
Выберите нужную печатную форму 
В открывшейся странице документа нажмите "Сохранить" и выберите папку на компьютере 
2. В карточке сотрудника перейдите в "Присоединенные файлы" и прикрепите сохраненный документ   
3. Вернитесь в карточку сотрудника, нажмите "Печать" - HR-Link Обмен данными с порталом 
4. В открывшейся форме обмена данными выберите "Файлы сотрудников" 
5. Поставьте галочку рядом с нужным документом, чтобы отправить его на портал 
При передаче документа из карточки сотрудника, номер и дата документа будут распознаваться из названия файла (формат номера через #/№, без пробела, формат даты - 00.00.0000 или 00.00.00)
Если по этому документу не было настроено сопоставление ранее, то его необходимо настроить. 


Присоединить документ к кадровому мероприятию
Присоединение документа к кадровому мероприятию
Процесс прикрепления
Для выбора документа и его присоединения к кадровому мероприятию
Найдите документ и откройте его карточку 
Нажмите  Печать и выберите нужную печатную форму файла документа 
В открывшейся вкладке с печатной формой документа нажмите на значок   и во всплывающем окне выберите вариант Присоединить к документу. Нажмите Сохранить 
Результат успешного прикрепления файла
В списке мероприятий теперь отображается, что у документа есть присоединенный файл   


Отправить расчетные листки
________________________________________
 
1. Перейдите в реестр Сотрудники
Выберите одного или нескольких сотрудников, нажмите Печать, <HR-Link > Сформировать пакет документов и отправить на портал 
2. Выберите Расчетный листок 
3. Выберите период, за который будет сформирован расчетный листок 
4. В окне Обмена с HRlink появится документ с названием Расчетный лист 
5. Проставьте параметры, как у любого другого кадрового документа, и отправляйте в HRlink


Отправить массовый документ в HRlink на подпись
Описание
Через ВПФ можно отправлять на подпись все массовые документы. Эта доработка сэкономит время кадровику и освободит его от ручной отправки документа на портале
Процесс отправки массового документа
Для массовой отправки документа на подпись: 
•	Сформируйте в 1С массовое кадровое мероприятие. Например, командировку группы. После того, как все поля кадрового мероприятия будут заполнены и написаны, нажмите на кнопку Печать→<HR-link> Сформировать пакет документов и отправить на портал 
 
•	В диалоговом окне выберите печатные формы при помощи галочек и нажмите на кнопку Сформировать документы
 
•	Выберите документы в таблице при помощи галочек, в правом верхнем углу выберите из выпадающего списка Отправить на подпись и нажмите на кнопку Отправить документы
 
Результат успешной отправки
Документ будет передан на портал всем выбранным сотрудникам.


API-запросы при работе с ВПФ. Скачать руководство для интеграторов
________________________________________
Руководство предназначено для разработчиков 1С и интеграторов HRlink и содержит перечень API-запросов, выполняемых при открытии внешней печатной формы (ВПФ) и выгрузке сотрудника.
  Скачать руководство


Ошибки в 1С и способы их исправления
________________________________________
Инструкция по устранению типовых ошибок в 1С
________________________________________
Указан некорректный номер паспорта
Ошибка возникает при передаче сотрудников с иностранным паспортом.
 
Чтобы устранить ошибку:
1.	В карточке сотрудника перейдите в раздел «Личные данные» и нажмите на стрелочку   в поле «Гражданство страны» и кликните на ссылку Показать все
 
2.	Найдите нужную страну в списке. Для удобства воспользуйтесь поисковой строкой, расположенной в левом верхнем углу окна. Кликните на наименовании
 
3.	Нужна страна отобразится в поле «Гражданство страны». Нажмите на кнопку ОК
 
4.	Подтвердите изменения в диалоговом окне. Для этого нажмите на кнопку Исправлена ошибка
 
5.	Сохраните изменения в карточке сотрудника, нажав Записать и закрыть, и повторно выгрузите сотрудника на портал
 
________________________________________
Неверный формат кода подразделения
Ошибка вызвана некорректным форматом кода подразделения.
 
Для исправления:
1.	Перейдите в карточку сотрудника, кликните на разделе Личные данные 
 
2.	Измените код подразделения на формат: 000-000 и нажмите Ок 
 
3.	Нажмите на кнопку Записать и закрыть
 
4.	Повторите выгрузку сотрудника 
________________________________________
Нет прав выполнять запрошенную операцию
Ошибка связана с отсутствием прав в HRlink на работу с юрлицом, отделом или документами.
 
Для устранения ошибки обратитесь к администратору портала HRlink, чтобы он выдал вам соответствующие права
________________________________________
Указанный сотрудник не является руководителем
Ошибка возникает, если у сотрудника не активирована роль Руководитель или выбрано неверное совместительство. 
Для устранения:
1.	Проверьте выбранное совместительство
2.	Если всё указано верно, попросите администратора пространства HRlink включить роль Руководитель
Инструкция по включению роли
После выполнения этих действий повторите выгрузку.
________________________________________
Нечитаемый шрифт при выгрузке документа
Ошибка связана с использованием нестандартного шрифта в печатной форме.
 
 Исправить ошибку может только пользователь с правами администратора 1С
Для исправления:
1.	Найдите через поисковую строку 1С «Макеты печатных форм» и перейдите в этот раздел по клику
 
2.	Раскройте нужны раздел, найдите нужный документ и нажмите на иконку Изменить
 
3.	Кликните в любом месте на тексте документа и нажмите на клавиатуре сочетание клавиш Ctrl+A, чтобы выделить весь текст. Затем нажмите на иконку выбора шрифта, в открывшемся окне выберите Arial 
 
4.	Нажмите на кнопку Записать и закрыть
 
________________________________________
Не выполнена авторизация, не определён идентификатор клиента
Ошибка с таким текстом возникает, если API-токен в настройках авторизации заполнен с ошибкой или устарел.
 
Для исправления ошибки: 
1.	Раскройте раздел «Авторизация и настройки»
2.	Введите адрес Вашего портала
3.	Нажмите на ссылку «Токен заполнен» и вставьте API-токен, который Вы скопировали на портале. Нажмите ОК. 
Подробная инструкция доступна по ссылке
Для соединения с порталом необходимо заполнить токен
 
Для исправления ошибки: 
1.	Раскройте раздел «Авторизация и настройки»
2.	Введите адрес Вашего портала
3.	Нажмите на ссылку «Токен заполнен» и вставьте API-токен, который Вы скопировали на портале. Нажмите ОК. 
Подробная инструкция доступна по ссылке
________________________________________
Приглашения отключены
Отправка сотрудников с приглашением невозможна при пакетной выгрузке справочников. 
Чтобы отключить пакетную выгрузку:
1.	Перейдите в раздел Справочники
2.	Уберите галочку напротив Пакетная выгрузка сотрудников
________________________________________
Ошибка при вызове метода контекста
Возникает при отсутствии настроек соединения.
 
1.	Перейдите в Авторизация и настройки > Иконка шестерёнки c настройками > Настройки 
2.	Перейдите в Системные настройки, напротив пункта «Устанавливать соединение с сервера 1С» измените значение с «Нет» на «Да» двойным кликом и нажмите на кнопку Сохранить настройки 
Если ошибка повторяется, обратитесь в техническую поддержку.
________________________________________
Нарушение прав доступа
Ошибка вызвана отсутствием прав в 1С.
 
1.	Проверьте Журнал регистрации (Администрирование > Обслуживание > Журнал регистрации), чтобы узнать, к чему нет доступа
2.	Попросите администратора 1С выдать вам необходимые права или выполните действия под пользователем с правами
Для устранения ошибки обратитесь, пожалуйста, к администратору 1С Вашей компании или к пользователю, который обладает правами на совершение действий, при которых возникла ошибка.


Редактировать документ в ВПФ
________________________________________Если Вы используете кастомные печатные формы документов, оформленные по инструкции, то такие формы можно отредактировать из ВПФ.
Процесс редактирования печатной формы в ВПФ
Последовательность шагов
•	Инициируйте отправку документа. Для этого выберите сотрудников, которым необходимо отправить документ и нажмите на кнопку Сформировать пакет документов и отправить на портал 
 
•	Выберите кастомную печатную форму документа, которую Вы предварительно добавили в 1С и нажмите на кнопку Сформировать документ 
 
•	Подтвердите формирование документа. Нажмите на кнопку Сформировать в диалоговом окне
 
•	Откройте кастомную печатную форму двойным кликом
 
•	Нажмите на кнопку Редактировать 
 
•	Документ откроется в текстовом редакторе, установленном на Вашем компьютере. Отредактируйте документ и подтвердите сохранение 
 
•	Нажмите на кнопку Закончить редактирование
 
•	Нажмите на кнопку Записать и закрыть 
 
•	Выберите способ отправки и отправьте документ на портал
 
Результат успешного редактирования документа
Если все предыдущие шаги были выполнены верно, то на портал будет отправлен отредактированный документ
